
USE PROYECTAVANZADA

CREATE TABLE USUARIOS(
EMAIL VARCHAR(100)NOT NULL,
PASWORD VARCHAR(8) NOT NULL
PRIMARY KEY(EMAIL)
)
CREATE TABLE AUDITORIA_SALARIO(
  IDAUDITORIA_SALARIO INT NOT NULL,
  USUARIO VARCHAR(25) NOT NULL,
  FECHA DATE NOT NULL,
  CATEGORIA_AFECTADA INT NOT NULL,
  SALARIO_ANTERIOR FLOAT NULL,
  SALARIO_NUEVO FLOAT NOT NULL,
  PRIMARY KEY(IDAUDITORIA_SALARIO)
);

CREATE TABLE CATEGORIA_VENDEDOR(
  IDCATEGORIA INT NOT NULL,
  IDSALARIO INT NOT NULL,
  PRIMARY KEY(IDCATEGORIA)
);

CREATE TABLE CLIENTE(
  IDCLIENTE INT NOT NULL,
  NOMBRE VARCHAR(100) NOT NULL,
  DIRECCION VARCHAR(50) NOT NULL,
  EMAIL VARCHAR(25) NOT NULL,
  TELEFONO VARCHAR(25) NOT NULL,
  PRIMARY KEY(IDCLIENTE)
);

CREATE TABLE FACTURA(
  IDFACTURA INT NOT NULL,
  IDVENTA INT NOT NULL,
  PRIMARY KEY (IDFACTURA)
);

CREATE TABLE INVENTARIO(
  IDINVENTARIO INT NOT NULL,
  IDPRODUCTO INT NOT NULL,
  CANTIDAD_COMPRADA INT NOT NULL,
  STOCK INT NOT NULL,
  PRIMARY KEY(IDINVENTARIO)
);

CREATE TABLE PRODUCTO(
  IDPRODUCTO INT NOT NULL,
  IDPROVEEDOR INT NOT NULL,
  NOMBRE VARCHAR(25) NOT NULL,
  PRECIO FLOAT NOT NULL,
  PRIMARY KEY(IDPRODUCTO)
);

CREATE TABLE PROVEEDOR(
  IDPROVEEDOR INT NOT NULL,
  NOMBRE VARCHAR(100) NOT NULL,
  DIRECCION VARCHAR(50) NOT NULL,
  EMAIL VARCHAR(25) NOT NULL,
  TELEFONO VARCHAR(25) NOT NULL,
  PRIMARY KEY(IDPROVEEDOR)
);


CREATE TABLE VENTA(
  IDVENTA INT NOT NULL,
  IDPRODUCTO INT NOT NULL,
  IDVENDEDOR INT NOT NULL,
  IDCLIENTE INT NOT NULL,
  PRIMARY KEY(IDVENTA)
);



CREATE TABLE VENTAXPRODUCTO(
  IDVENTA INT NOT NULL,
  IDPRODUCTO INT NOT NULL,
  CANTIDAD INT NOT NULL,
  DESCUENTO FLOAT NOT NULL,
  PRIMARY KEY(IDPRODUCTO, IDVENTA)
);

CREATE TABLE VENDEDOR(
  IDVENDEDOR INT NOT NULL,
  IDCATEGORIA INT NOT NULL,
  DIRECCION VARCHAR(25) NOT NULL,
  NOMBRE VARCHAR(25) NOT NULL,
  EMAIL VARCHAR(25) NOT NULL,
  TELEFONO VARCHAR(25) NOT NULL,
  PRIMARY KEY(IDVENDEDOR)
);

CREATE TABLE SALARIO(
  IDSALARIO INT NOT NULL,
  SALARIO VARCHAR(25) NOT NULL,
  PRIMARY KEY(IDSALARIO)
);

/* CREACIÓN FOREIGN KEYS */

-- FK IDSALARIO EN CATEGORIA_VENDEDOR
ALTER TABLE CATEGORIA_VENDEDOR 
ADD CONSTRAINT FK_CATEGORIA_VENDEDOR_IDSALARIO
FOREIGN KEY (IDSALARIO) REFERENCES SALARIO (IDSALARIO);

-- FK IDVENTA EN FACTURA
ALTER TABLE FACTURA 
ADD CONSTRAINT FK_FACTURA_IDVENTA
FOREIGN KEY (IDVENTA) REFERENCES VENTA (IDVENTA);

-- FK IDPRODUCTO EN INVENTARIO
ALTER TABLE INVENTARIO 
ADD CONSTRAINT FK_INVENTARIO_IDPRODUCTO
FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTO (IDPRODUCTO);

-- FK IDPROVEEDOR EN PRODUCTO
ALTER TABLE PRODUCTO 
ADD CONSTRAINT FK_PRODUCTO_IDPROVEEDOR
FOREIGN KEY (IDPROVEEDOR) REFERENCES PROVEEDOR (IDPROVEEDOR);

-- FK IDCATEGORIA EN VENDEDOR
ALTER TABLE VENDEDOR 
ADD CONSTRAINT FK_VENDEDOR_IDCATEGORIA
FOREIGN KEY (IDCATEGORIA) REFERENCES CATEGORIA_VENDEDOR (IDCATEGORIA);

-- FK IDCLIENTE EN VENTA
ALTER TABLE VENTA 
ADD CONSTRAINT FK_VENTA_IDCLIENTE
FOREIGN KEY (IDCLIENTE) REFERENCES CLIENTE (IDCLIENTE);

-- FK IDPRODUCTO EN VENTA
ALTER TABLE VENTA 
ADD CONSTRAINT FK_VENTA_IDPRODUCTO
FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTO (IDPRODUCTO);

-- FK IDVENDEDOR EN VENTA
ALTER TABLE VENTA 
ADD CONSTRAINT FK_VENTA_IDVENDEDOR
FOREIGN KEY (IDVENDEDOR) REFERENCES VENDEDOR (IDVENDEDOR);

-- FK IDVENTA EN VENTAXPRODUCTO
ALTER TABLE VENTAXPRODUCTO 
ADD CONSTRAINT FK_VENTAXPRODUCTO_IDVENTA
FOREIGN KEY (IDVENTA) REFERENCES VENTA (IDVENTA);

-- FK IDPRODUCTO EN VENTAXPRODUCTO
ALTER TABLE VENTAXPRODUCTO 
ADD CONSTRAINT FK_VENTAXPRODUCTO_IDPRODUCTO
FOREIGN KEY (IDPRODUCTO) REFERENCES PRODUCTO (IDPRODUCTO);

-----DESPUES DE CREAR LAS AUDITORIAS EN SYSTEM NOS EJECUTAMOS ESTE AQUI EN ADMINISTRADOR1  PROYECTO_INSERTS_ADMINISTRADOR1.sql

-----------------------------------            /* PROVEEDORES */

INSERT INTO PROVEEDOR (IDPROVEEDOR,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (1,'SUPERDESPENSA', 'CARTAGO', 'X@SDESPENSA.COM', '123');

INSERT INTO PROVEEDOR (IDPROVEEDOR,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (2,'OTROPROVEEDOR', 'CARTAGO', 'X@OTROPROVEEDOR.COM', '123');

INSERT INTO PROVEEDOR (IDPROVEEDOR,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (3,'FABRICA', 'CARTAGO', 'X@FABRICA.COM', '123');

INSERT INTO PROVEEDOR (IDPROVEEDOR,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (4,'ALMACEN', 'CARTAGO', 'X@ALMACEN.COM', '123');

INSERT INTO PROVEEDOR (IDPROVEEDOR,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (5,'COMERCIO', 'CARTAGO', 'X@COMERCIO.COM', '123');

/* CLIENTES */

INSERT INTO CLIENTE (IDCLIENTE,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (1,'JUAN', 'PEREZ', 'JP@CLIENTE.COM', '111');

INSERT INTO CLIENTE (IDCLIENTE,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (2,'ANDREA', 'PEREZ', 'AP@CLIENTE.COM', '111');

INSERT INTO CLIENTE (IDCLIENTE,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (3,'GUILLERMO', 'PEREZ', 'GP@CLIENTE.COM', '111');

INSERT INTO CLIENTE (IDCLIENTE,NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (4,'MELISSA', 'PEREZ', 'MP@CLIENTE.COM', '111');

/* SALARIOS */
INSERT INTO SALARIO (IDSALARIO,SALARIO) VALUES (1,500000);
INSERT INTO SALARIO (IDSALARIO,SALARIO) VALUES (2,600000);
INSERT INTO SALARIO (IDSALARIO,SALARIO) VALUES (3,700000);

/* CATEGORIAS */
INSERT INTO CATEGORIA_VENDEDOR (IDCATEGORIA,IDSALARIO) VALUES (1,1);
INSERT INTO CATEGORIA_VENDEDOR (IDCATEGORIA,IDSALARIO) VALUES (2,2);
INSERT INTO CATEGORIA_VENDEDOR (IDCATEGORIA,IDSALARIO) VALUES (3,3);


/* VENDEDOR */
INSERT INTO VENDEDOR (IDVENDEDOR,IDCATEGORIA, NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (1,1, 'JUAN', 'PEREZ', 'JP@CLIENTE.COM', '111');

INSERT INTO VENDEDOR (IDVENDEDOR,IDCATEGORIA, NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (2,1, 'FABIOLA', 'PEREZ', 'FP@CLIENTE.COM', '111');

INSERT INTO VENDEDOR (IDVENDEDOR,IDCATEGORIA, NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (3,1, 'JOSE', 'PEREZ', 'JP@CLIENTE.COM', '111');

INSERT INTO VENDEDOR (IDVENDEDOR,IDCATEGORIA, NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (4,1, 'RONALD', 'PEREZ', 'RP@CLIENTE.COM', '111');

INSERT INTO VENDEDOR (IDVENDEDOR,IDCATEGORIA, NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (5,2, 'CLAUDIA', 'PEREZ', 'CP@CLIENTE.COM', '111');

INSERT INTO VENDEDOR (IDVENDEDOR,IDCATEGORIA, NOMBRE, DIRECCION, EMAIL, TELEFONO)
VALUES (6,3, 'RAQUEL', 'PEREZ', 'RP@CLIENTE.COM', '111');

/* CATEGORIAXVENDEDOR */
INSERT INTO CATEGORIA_VENDEDOR (IDSALARIO)
VALUES (1); 

INSERT INTO CATEGORIA_VENDEDOR (IDSALARIO)
VALUES (2); 

INSERT INTO CATEGORIA_VENDEDOR (IDSALARIO)
VALUES (3); 

/* PRODUCTOS */
INSERT INTO PRODUCTO (IDPRODUCTO,IDPROVEEDOR, NOMBRE, PRECIO)
VALUES (1,1, 'MARTILLO', 1500);

INSERT INTO PRODUCTO (IDPRODUCTO,IDPROVEEDOR, NOMBRE, PRECIO)
VALUES (2,1, 'ESMERÍL', 11500);

INSERT INTO PRODUCTO (IDPRODUCTO,IDPROVEEDOR, NOMBRE, PRECIO)
VALUES (3,1, 'MAZO', 3000);

INSERT INTO PRODUCTO (IDPRODUCTO,IDPROVEEDOR, NOMBRE, PRECIO)
VALUES (4,1, 'METABO', 9000);

INSERT INTO PRODUCTO (IDPRODUCTO,IDPROVEEDOR, NOMBRE, PRECIO)
VALUES (5,1, 'DESATORNILLADOR', 1500);

/* INVENTARIO */
INSERT INTO INVENTARIO (IDINVENTARIO,IDPRODUCTO, CANTIDAD_COMPRADA, STOCK)
VALUES (1,1, 500, 450);

INSERT INTO INVENTARIO (IDINVENTARIO,IDPRODUCTO, CANTIDAD_COMPRADA, STOCK)
VALUES (2,1, 900, 430);

INSERT INTO INVENTARIO (IDINVENTARIO,IDPRODUCTO, CANTIDAD_COMPRADA, STOCK)
VALUES (3,1, 200, 50);

INSERT INTO INVENTARIO (IDINVENTARIO,IDPRODUCTO, CANTIDAD_COMPRADA, STOCK)
VALUES (4,1, 150, 30);

INSERT INTO INVENTARIO (IDINVENTARIO,IDPRODUCTO, CANTIDAD_COMPRADA, STOCK)
VALUES (5,1, 50, 10);

/* VENTAS */
INSERT INTO VENTA (IDVENTA,IDPRODUCTO, IDVENDEDOR, IDCLIENTE)
VALUES (1,1, 1, 1);

INSERT INTO VENTA (IDVENTA,IDPRODUCTO, IDVENDEDOR, IDCLIENTE)
VALUES (2,1, 1, 1);

INSERT INTO VENTA (IDVENTA,IDPRODUCTO, IDVENDEDOR, IDCLIENTE)
VALUES (3,2, 2, 2);

INSERT INTO VENTA (IDVENTA,IDPRODUCTO, IDVENDEDOR, IDCLIENTE)
VALUES (4,1, 1, 3);

INSERT INTO VENTA (IDVENTA,IDPRODUCTO, IDVENDEDOR, IDCLIENTE)
VALUES (5,1, 1, 4);

/* INSERT TABLAXPRODUCTO*/
INSERT INTO VENTAXPRODUCTO (IDVENTA, IDPRODUCTO, CANTIDAD, DESCUENTO)
VALUES (1, 1, 50, 0);

INSERT INTO VENTAXPRODUCTO (IDVENTA, IDPRODUCTO, CANTIDAD, DESCUENTO)
VALUES (2, 1, 60, 0);

INSERT INTO VENTAXPRODUCTO (IDVENTA, IDPRODUCTO, CANTIDAD, DESCUENTO)
VALUES (3, 1, 70, 0);

INSERT INTO VENTAXPRODUCTO (IDVENTA, IDPRODUCTO, CANTIDAD, DESCUENTO)
VALUES (4, 1, 80, 0);

INSERT INTO VENTAXPRODUCTO (IDVENTA, IDPRODUCTO, CANTIDAD, DESCUENTO)
VALUES (5, 1, 90, 0);

/* FACTURAS */
INSERT INTO FACTURA (IDFACTURA,IDVENTA)
VALUES (1,1);

INSERT INTO FACTURA (IDFACTURA,IDVENTA)
VALUES (2,2);

INSERT INTO FACTURA (IDFACTURA,IDVENTA)
VALUES (3,3);

INSERT INTO FACTURA (IDFACTURA,IDVENTA)
VALUES (4,4);

INSERT INTO FACTURA (IDFACTURA,IDVENTA)
VALUES (5,5);
